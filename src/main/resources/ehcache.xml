<?xml version="1.0" encoding="UTF-8"?>

<ehcache xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:noNamespaceSchemaLocation="ehcache.xsd"
         updateCheck="true" monitoring="autodetect"
         dynamicConfig="true">

  <diskStore path="java.io.tmpdir"/>

  <cacheManagerPeerProviderFactory
      class="net.sf.ehcache.distribution.jgroups.JGroupsCacheManagerPeerProviderFactory"
      properties="connect=
                  UDP(
                     bind_addr=192.168.0.100;
                     mcast_addr=224.10.10.10;
                     mcast_port=45588;
                     tos=8;
                     ucast_recv_buf_size=512K;
                     ucast_send_buf_size=100K;
                     mcast_recv_buf_size=512K;
                     mcast_send_buf_size=100K;
                     loopback=true;
                     discard_incompatible_packets=true;
                     max_bundle_size=64K;
                     max_bundle_timeout=30;
                     ip_ttl=8;
                     enable_bundling=true;
                     enable_diagnostics=true;
                     thread_naming_pattern=cl;
                     thread_pool.enabled=true;
                     thread_pool.min_threads=2;
                     thread_pool.max_threads=8;
                     thread_pool.keep_alive_time=5000;
                     thread_pool.queue_enabled=true;
                     thread_pool.queue_max_size=10000;
                     thread_pool.rejection_policy=discard;
                     oob_thread_pool.enabled=true;
                     oob_thread_pool.min_threads=1;
                     oob_thread_pool.max_threads=8;
                     oob_thread_pool.keep_alive_time=5000;
                     oob_thread_pool.queue_enabled=false;
                     oob_thread_pool.queue_max_size=100;
                     oob_thread_pool.rejection_policy=Run):
                  PING(
                     timeout=2000;
                     num_initial_members=3):
                  MERGE2(
                     max_interval=30000;
                     min_interval=10000):
                  FD_SOCK:
                  FD_ALL:
                  VERIFY_SUSPECT(
                     timeout=1500):
                  BARRIER:
                  pbcast.NAKACK(
                     exponential_backoff=300;
                     use_mcast_xmit=false;
                     discard_delivered_msgs=true):
                  UNICAST:
                  pbcast.STABLE(
                     stability_delay=1000;
                     desired_avg_gossip=50000;
                     max_bytes=4M):
                  pbcast.GMS(
                     print_local_addr=true;
                     join_timeout=3000;
                     view_bundling=true):
                  FRAG2(
                     frag_size=60K):
                  pbcast.STATE_TRANSFER"
      propertySeparator="::" />

  <defaultCache
      maxElementsInMemory="10000"
      eternal="false"
      timeToIdleSeconds="120"
      timeToLiveSeconds="120"
      overflowToDisk="true"
      diskSpoolBufferSizeMB="30"
      maxElementsOnDisk="10000000"
      diskPersistent="false"
      diskExpiryThreadIntervalSeconds="120"
      memoryStoreEvictionPolicy="LRU"
      statistics="false" />

  <cache
      name="jgroupsCache"
      maxElementsInMemory="10000"
      maxElementsOnDisk="1000"
      eternal="false"
      overflowToDisk="true"
      diskSpoolBufferSizeMB="20"
      timeToIdleSeconds="300"
      timeToLiveSeconds="600"
      memoryStoreEvictionPolicy="LFU"
      transactionalMode="off">
    <bootstrapCacheLoaderFactory
        class="net.sf.ehcache.distribution.jgroups.JGroupsBootstrapCacheLoaderFactory"
        properties="bootstrapAsynchronously=true" />
    <cacheEventListenerFactory
        class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
        properties="replicateAsynchronously=true, replicatePuts=true,
                    replicateUpdates=true, replicateUpdatesViaCopy=false,
                    replicateRemovals=true,asynchronousReplicationIntervalMillis=1000" />
  </cache>

</ehcache>
